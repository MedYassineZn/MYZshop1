<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="insertStyle.css">
    <!-- <script src="insert.js"></script> -->
</head>
<body>
    <form id="productForm" onchange="addProduct(event)" enctype="multipart/form-data">
        <fieldset>
            <legend>ADD Product</legend>
            <table  >
                <tr>
                    <td colspan="2">
                        <!-- From Uiverse.io by Satwinder04 -->
                        <div class="input-container">
                            <input type="text" id="input" required="">
                            <label for="input" class="label">Num livre</label>
                        <div class="underline"></div>
                        </div>
                    </td >
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="input-container">
                            <input type="text" id="np" required="">
                            <label for="input" class="label">Name livre</label>
                        <div class="underline"></div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="input-container">
                            <input type="text" id="p" required="">
                            <label for="input" class="label">prix livre</label>
                        <div class="underline"></div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="input-container">
                            <input type="text" id="qt" required="">
                            <label for="input" class="label">Qt </label>
                        <div class="underline"></div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <div class="custom-file-upload" >
                            <label for="imgf" class="upload-label">Chose pictureüì§</label>
                            <input type="file" id="imgf" class="file-input" accept="image/*">

                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button type="submit" onclick="confirmProducts()"  class="button">
                            <span class="button__text">Add Item</span>
                            <span class="button__icon">+</span>
                        </button>
                    </td>
                    <td>
                        <button type="reset"   class="button">
                            <span class="button__text">Cancel</span>
                            <span class="button__icon1"><i>+</i></span>
                        </button>
                    </td>
                    
                     <!-- <td><input type="text" id="deleteProductName" placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿ≠ÿ∞ŸÅ"></td>
                    <td><input type="button" onclick="deleteProduct()" value="suprimer"></td> -->
                </tr>
            </table>
            
            <div id="productContainer" class="product-container">
                <!-- ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ≥ÿ™Ÿèÿ∂ÿßŸÅ ŸáŸÜÿß -->
            </div>
        </fieldset>
    </form>
    <script>
        // ŸÖÿµŸÅŸàŸÅÿ© ŸÑÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖÿ§ŸÇÿ™Ÿãÿß
        let products = [];
    
        // ÿØÿßŸÑÿ© ŸÑÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨
        function addProduct(event) {
            event.preventDefault();
    
            const name = document.getElementById('np').value;
            const price = document.getElementById('p').value;
            const quantity = document.getElementById('qt').value;
            const image = document.getElementById('imgf').files[0];
    
            // if (!name || !price || !quantity || !image) {
            //     alert("Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ Ÿàÿ•ÿ∂ÿßŸÅÿ© ÿµŸàÿ±ÿ©.");
            //     return;
            // }
    
            const reader = new FileReader();
            reader.onload = function(e) {
                const imageUrl = e.target.result;
    
                const product = {
                    name: name,
                    price: price,
                    quantity: quantity,
                    image: imageUrl
                };
                products.push(product);
                updateProductContainer();
            };
            reader.readAsDataURL(image);
    
            document.getElementById('productForm').reset();
           
        }
    
        // ÿØÿßŸÑÿ© ŸÑÿ™ÿ≠ÿØŸäÿ´ ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™
        function updateProductContainer() {
    const container = document.getElementById('productContainer');
    container.innerHTML = ''; // ŸÖÿ≥ÿ≠ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ≠ÿßŸÑŸä

    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ŸÖŸÜÿ™ÿ¨ÿßÿ™
    if (products.length > 0) {
        const latestProduct = products[products.length - 1]; // ÿ¢ÿÆÿ± ŸÖŸÜÿ™ÿ¨ ŸÖÿ∂ÿßŸÅ

        const productDiv = document.createElement('div');
        productDiv.classList.add('product');

        const img = document.createElement('img');
        img.src = latestProduct.image;
        img.alt = "ÿµŸàÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨";
        img.style.width = '150px';
        img.style.height = '150px';
        img.style.objectFit = 'cover';
        productDiv.appendChild(img);

        const productName = document.createElement('h3');
        productName.textContent = latestProduct.name;
        productDiv.appendChild(productName);

        const productPrice = document.createElement('p');
        productPrice.textContent = `Price : ${latestProduct.price} DT`;
        productDiv.appendChild(productPrice);

        const productQuantity = document.createElement('p');
        productQuantity.textContent = `Quantity : ${latestProduct.quantity}`;
        productDiv.appendChild(productQuantity);

        container.appendChild(productDiv);
    }
}

    
        // ÿØÿßŸÑÿ© ŸÑÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ≠ŸÅÿ∏ ŸÅŸä localStorage
        function confirmProducts() {
            if (products.length === 0) {
                alert("ŸÑŸÖ Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿ£Ÿä ŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÑŸÑÿ≠ŸÅÿ∏.");
                return;
            }
            localStorage.setItem('products', JSON.stringify(products));
            alert("ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ");
        }
    
        // ÿØÿßŸÑÿ© ŸÑÿ≠ÿ∞ŸÅ ŸÖŸÜÿ™ÿ¨ ÿ≠ÿ≥ÿ® ÿßÿ≥ŸÖŸá
        function deleteProduct() {
            const productNameToDelete = document.getElementById('deleteProductName').value.trim();
    
            if (productNameToDelete === '') {
                alert("Ÿäÿ±ÿ¨Ÿâ ÿ•ÿØÿÆÿßŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿßŸÑÿ∞Ÿä ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅŸá.");
                return;
            }
    
            const initialLength = products.length;
    
            // ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸÜÿ™ÿ¨ ŸÖŸÜ ÿßŸÑŸÖÿµŸÅŸàŸÅÿ©
            products = products.filter(product => product.name !== productNameToDelete);
    
            if (products.length === initialLength) {
                alert("ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿßŸÑÿ∞Ÿä ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅŸá.");
            } else {
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÅŸä localStorage
                localStorage.setItem('products', JSON.stringify(products));
                updateProductContainer();
                alert(`ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸÜÿ™ÿ¨ "${productNameToDelete}" ÿ®ŸÜÿ¨ÿßÿ≠. ‚ùå`);
            }
    
            // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿ≠ŸÇŸÑ ÿßŸÑÿ•ÿØÿÆÿßŸÑ
            document.getElementById('deleteProductName').value = '';
        }
    
        // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑŸÖÿÆÿ≤ŸÜÿ© ÿπŸÜÿØ ŸÅÿ™ÿ≠ ÿßŸÑÿµŸÅÿ≠ÿ©
        window.onload = function() {
            const savedProducts = JSON.parse(localStorage.getItem('products')) || [];
            if (savedProducts.length > 0) {
                products = savedProducts;
                
            }
        };



        document.getElementById('imgf').addEventListener('change', function() {
        const fileName = this.files[0] ? this.files[0].name : 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ± ÿ£Ÿä ŸÖŸÑŸÅ';
        document.getElementById('file-name').textContent = fileName;
        });

    </script>
    
    
    
</body>
</html>